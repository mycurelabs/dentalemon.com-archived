{
  "type": "spec",
  "morgoth": "medium",
  "status": "draft",
  "domain": "full-stack",
  "name": "repo-structure-cleanup",
  "title": "Repository Structure Cleanup — Orphans, Phantom Refs, Stale Docs",
  "created": "2026-02-12",
  "updated": "2026-02-12",
  "problem": {
    "surface_request": "Audit repo for unorganized files, phantom references, conflicting docs, and future-proofness",
    "root_problem": "Repo evolved from MYCURE template to Dentalemon without synchronizing docs, config, and file structure. CLAUDE.md has 9+ false claims, 10 phantom routes documented, 7 broken nav links, ~1.8MB orphaned files, ambiguous package manager.",
    "affected": ["developers", "search engines", "CI/CD", "future maintainers"],
    "impact": "Wrong setup instructions, dead files bloat, broken links, compounding confusion"
  },
  "outcome": "Repository where every doc claim is verified, zero orphaned files, single package manager, no broken links",
  "boundaries": {
    "in_scope": [
      "Rewrite CLAUDE.md to match codebase",
      "Update README.md",
      "Delete orphaned files",
      "Canonicalize pnpm",
      "Remove broken nav links",
      "Archive MYCURE guide",
      "Fix .gitignore and magicui barrel"
    ],
    "out_of_scope": [
      "Creating 10 missing template routes",
      "Removing unused npm dependencies from package.json",
      "Rewriting ProductHeader for 3-page site",
      "Removing unused brandConfig URL entries"
    ]
  },
  "assumptions": [
    {"assumption": "pnpm is canonical", "impact_if_wrong": "Build scripts break", "status": "confirmed"},
    {"assumption": "MYCURE guide archived to .docs/", "impact_if_wrong": "Could be deleted instead", "status": "confirmed"},
    {"assumption": "Dead links should be removed", "impact_if_wrong": "Links stay broken", "status": "confirmed"},
    {"assumption": "Orphaned files have no hidden consumers", "impact_if_wrong": "Deleting breaks something", "status": "verified"}
  ],
  "tasks": [
    {
      "id": "1",
      "name": "Rewrite CLAUDE.md",
      "acceptance_criteria": "Every claim verified against code",
      "test": "Spot-check 3 random claims — all match code",
      "priority": "P0",
      "estimate": {"size": "M", "time": "20 min"},
      "subtasks": [
        {"id": "1.1", "action": "Update Next.js version from 14 to 16 in CLAUDE.md", "acceptance_criteria": "Version matches package.json"},
        {"id": "1.2", "action": "Update package manager from npm to pnpm in CLAUDE.md", "acceptance_criteria": "All commands use pnpm"},
        {"id": "1.3", "action": "Update component count from 47+ to actual count in CLAUDE.md", "acceptance_criteria": "Count matches reality"},
        {"id": "1.4", "action": "Fix image optimization claim in CLAUDE.md", "acceptance_criteria": "Matches next.config.mjs"},
        {"id": "1.5", "action": "Fix TypeScript/ESLint build claims in CLAUDE.md", "acceptance_criteria": "Matches actual config"},
        {"id": "1.6", "action": "Remove 10 phantom routes from CLAUDE.md", "acceptance_criteria": "Only existing routes listed"},
        {"id": "1.7", "action": "Remove references to PAGE_LAYOUTS.md and COMPONENT_PATTERNS.md", "acceptance_criteria": "No refs to non-existent docs"},
        {"id": "1.8", "action": "Update Key Dependencies to actually-used deps", "acceptance_criteria": "Every dep has imports"},
        {"id": "1.9", "action": "Remove Scrollytelling from Component Patterns", "acceptance_criteria": "Only existing components listed"}
      ]
    },
    {
      "id": "2",
      "name": "Update README.md",
      "acceptance_criteria": "README matches current project state",
      "test": "All version/route/command claims verified",
      "priority": "P1",
      "estimate": {"size": "S", "time": "10 min"},
      "subtasks": [
        {"id": "2.1", "action": "Update Next.js version to 16 in README.md", "acceptance_criteria": "Version correct"},
        {"id": "2.2", "action": "Verify all pnpm commands in README.md", "acceptance_criteria": "No npm/yarn references"},
        {"id": "2.3", "action": "Update page routes in README.md", "acceptance_criteria": "Only 3 real routes listed"},
        {"id": "2.4", "action": "Update component count in README.md", "acceptance_criteria": "Matches actual count"}
      ]
    },
    {
      "id": "3",
      "name": "Delete Orphaned Files",
      "acceptance_criteria": "Zero unreferenced non-doc files",
      "test": "ls confirms all targets deleted",
      "priority": "P0",
      "estimate": {"size": "S", "time": "10 min"},
      "subtasks": [
        {"id": "3.1", "action": "Delete next.config.ts", "acceptance_criteria": "Only next.config.mjs remains"},
        {"id": "3.2", "action": "Delete playwright-*.js scripts", "acceptance_criteria": "No playwright scripts in root"},
        {"id": "3.3", "action": "Delete public/Koalas/ directory", "acceptance_criteria": "Directory gone"},
        {"id": "3.4", "action": "Delete public/dentalemon-ui-prepped.png", "acceptance_criteria": "Only .webp remains"},
        {"id": "3.5", "action": "Delete public/dentalemon-ui-prepped-mobile.webp", "acceptance_criteria": "File gone"},
        {"id": "3.6", "action": "Delete app/dentalemon_favicon.ico", "acceptance_criteria": "Only favicon.ico remains"},
        {"id": "3.7", "action": "Delete styles/design-system.ts", "acceptance_criteria": "File gone"},
        {"id": "3.8", "action": "Delete all macOS ._* resource fork files", "acceptance_criteria": "No ._* files"},
        {"id": "3.9", "action": "Delete unused image variants", "acceptance_criteria": "Only referenced variants remain"},
        {"id": "3.10", "action": "Consolidate Features Photos/ into features/", "acceptance_criteria": "Single features directory"}
      ]
    },
    {
      "id": "4",
      "name": "Canonicalize pnpm",
      "acceptance_criteria": "pnpm is sole package manager",
      "test": "pnpm run build succeeds",
      "priority": "P0",
      "estimate": {"size": "S", "time": "5 min"},
      "subtasks": [
        {"id": "4.1", "action": "Delete package-lock.json if exists", "acceptance_criteria": "No package-lock.json"},
        {"id": "4.2", "action": "Run pnpm install", "acceptance_criteria": "Install succeeds"},
        {"id": "4.3", "action": "Add packageManager field to package.json", "acceptance_criteria": "Field specifies pnpm"},
        {"id": "4.4", "action": "Verify pnpm run build succeeds", "acceptance_criteria": "Exit code 0"}
      ]
    },
    {
      "id": "5",
      "name": "Fix Broken Navigation Links",
      "acceptance_criteria": "No Link hrefs to non-existent routes",
      "test": "Grep for phantom routes returns zero results",
      "priority": "P0",
      "estimate": {"size": "S", "time": "10 min"},
      "subtasks": [
        {"id": "5.1", "action": "Remove dead route links from ProductHeader.tsx", "acceptance_criteria": "No links to non-existent routes"},
        {"id": "5.2", "action": "Search codebase for other phantom route references", "acceptance_criteria": "Zero references to removed routes"}
      ]
    },
    {
      "id": "6",
      "name": "Archive and Housekeeping",
      "acceptance_criteria": "Repo structure is clean",
      "test": "Build succeeds, all pages generated",
      "priority": "P1",
      "estimate": {"size": "S", "time": "10 min"},
      "subtasks": [
        {"id": "6.1", "action": "Archive MYCURE guide to .docs/archive/", "acceptance_criteria": "File moved, not in root"},
        {"id": "6.2", "action": "Add ._* pattern to .gitignore", "acceptance_criteria": "macOS forks excluded"},
        {"id": "6.3", "action": "Add sparkles-text export to magicui/index.ts", "acceptance_criteria": "All components exported"},
        {"id": "6.4", "action": "Run pnpm run build to verify", "acceptance_criteria": "Build succeeds"}
      ]
    }
  ],
  "test_requirements": [
    "pnpm run build — exit code 0, all pages generated",
    "Grep for phantom route names — zero results",
    "Verify deleted files are gone",
    "CLAUDE.md spot-check — 3 random claims match code"
  ]
}
